%%% MPI Beamer Template v1.0 - Preamble
%%% Author: Stefan Sorg
%%% Max Planck Institute for Innovation and Competition


%% Beamer theme

\usetheme[
	progressbar=frametitle,		% none, head, frametitle, foot
%	titleformat=allcaps
]{metropolis}

% Progress bar width
\makeatletter
\setlength{\metropolis@titleseparator@linewidth}{1pt}
\setlength{\metropolis@progressonsectionpage@linewidth}{1pt}
\setlength{\metropolis@progressinheadfoot@linewidth}{2pt}
\makeatother

% Remove non-allowed commands in PDF strings (hyperref)
\pdfstringdefDisableCommands{%
  \def\\{}%
  \def\vspace#1{<#1>}%
  \def\textbf#1{<#1>}%
  \def\translate#1{<#1>}%
}


%% Packages

% Appendix ignored in progress bar -> call \appendix
\usepackage{appendixnumberbeamer}

% Figures
\usepackage{graphicx}

% Nicer horizontal lines in tables, e.g. \midrule
\usepackage{booktabs}

% References
\usepackage{natbib}   % compatibility with beamer class?
\renewcommand{\bibsection}{}  % Remove section

% Math
\usepackage{bm}

% Multi-column itemize environments
\usepackage{multicol}

% Alignment of tables at decimal point
\usepackage{siunitx}
\sisetup{ group-digits            = integer ,
          input-symbols           = \pi\dots()[],
          input-open-uncertainty  = ,
          input-close-uncertainty = ,
	      table-format            = 1.3 ,
          group-digits            = integer ,
}


%% Color settings

\definecolor{textcolor}{RGB}{35,55,59}	% default metropolis theme text color

% MPI colors
\definecolor{mpi-blue}{RGB}{0,72,153}
\definecolor{mpi-lightblue}{RGB}{122,162,190}
\definecolor{mpi-grayblue}{RGB}{239,240,242}
\definecolor{mpi-darkgray}{RGB}{77,77,77}
\definecolor{mpi-gray}{RGB}{159,159,159}

\setbeamercolor{background canvas}{bg=white}	% Background color: white
   % (Stata does not allow for figure with transparent background)
%\setbeamercolor{frametitle}{bg=mpi-darkgray}	% Header color
\setbeamercolor{progress bar}{fg=mpi-blue}		% Progress bar color
\setbeamercolor{alerted text}{fg=textcolor}		% Alerted text color -> \alert
%\setbeamercolor{alerted text}{fg=mpi-blue}		% Alerted text color -> \alert
\setbeamerfont{alerted text}{series=\bfseries}

% Logo MPI: Minerva
\usepackage{textpos}
\newcommand{\addlogo}[2]{
	\begin{tikzpicture}[remember picture, overlay]
	\node[anchor=south west, xshift=#1, yshift=#2] at (current page.south west) {\includegraphics[height=2cm]{Minerva_grau_Anschnitt.pdf}};
	\end{tikzpicture}
}
\addtobeamertemplate{background}{}{\addlogo{-4pt}{-4pt}}
%\addtobeamertemplate{footline}{}{\addlogo{-2pt}{-2pt}}
%\addtobeamertemplate{section page}{}{\addlogo{-4pt}{-4pt}}
%\addtobeamertemplate{title page}{}{\addlogo{-4pt}{-4pt}}


%% Definition of commands

% Simple input of a table
% Arguments: file path, textheight factor, arrastretch factor, tabcolsep
%\usepackage{adjustbox}
\newcommand{\inputtable}[4]{
	\begin{table}
		\hspace{-3mm}				% for proper centering
		\makebox[\textwidth][c] {%	% for proper centering
			\resizebox{#2\textwidth}{!}{
				\renewcommand{\arraystretch}{#3}
				\tabcolsep = #4
				\input{#1}
			}
		}
	\end{table}
}
\newcommand{\ptable}[4]{
	\begin{table}
		\hspace{-3mm}				% for proper centering
		\makebox[\textwidth][c] {%	% for proper centering
			\resizebox{#2\textwidth}{!}{
				\renewcommand{\arraystretch}{#3}
				\tabcolsep = #4
				#1
			}
		}
	\end{table}
}

% Use before figure
\newcommand{\prefig}[1][2mm]{
	\centering
	\vspace{#1}
}

% Smaller, gray font - e.g. for citing literature
\newcommand{\lit}[1]{
	{\footnotesize{\textcolor{gray}{#1}}}
}

% Shorthand for \rightarrow while in text mode
\newcommand{\ra}{$\rightarrow \ $}

% Re-definition of \emph -> Sub-Headings
\renewcommand{\emph}[1]{\textcolor{mpi-blue}{\textbf{#1}}}


% Text-Indentation commands

% Command \thus: Indent after nice \Rightarrow
\newcommand{\thus}[1]{%
\begin{enumerate}[\textcolor{mpi-blue}{\raisebox{1pt}{$\Rightarrow$}}]
%\begin{enumerate}[\textrightarrow]
%\begin{enumerate}[\textcolor{mpi-blue}{\raisebox{1pt}{$\blacktriangleright$}}]
	\item #1
\end{enumerate}
}

% Command \equals: Indent after nice equality sign
\newcommand{\equals}[1]{%
\begin{enumerate}[\textcolor{mpi-blue}{\raisebox{1pt}{$=$}}]
	\item #1
\end{enumerate}
}

% Beautiful quotations
\newcommand{\hugequote}{%
  {\fontsize{42}{48}\selectfont \color{mpi-blue} \textbf{``}
  \vskip -.65em}
}

\newcommand{\prettyquote}[2]{%
  \begin{flushright}
  \colorbox{white}{%
    \parbox{.6\textwidth}{%
    {\hugequote} \vskip -.5em
    \parindent 2.3em
    \textit{#1}
    \begin{flushright}\lit{#2}\end{flushright}
    }
  }
  \end{flushright}
}
